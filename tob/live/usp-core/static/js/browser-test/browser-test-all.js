var BrowserTest=BrowserTest||{};BrowserTest.definitions=function(b){function c(k,h){var q=k.split(",");var l;if(q.length>0){l=[];var f=0;for(var j=0;j<q.length;j++){var u=q[j];var r;var o;function g(e){e=e.trim();var n=[];var i=e.split(" ");n[0]=i.length>1?i[0]:i;n[1]=i.length>1?i[1]:"";return n}var p=g(u);r=p[0];o=p[1];for(var s=0;s<h.length;s++){try{if(r==h[s][2]){var d=h[s][0];if(o!=""){d+="|"+o}l[f]=d;f++}}catch(m){console.log(m)}}}}return l}function a(d){return d=="false"?false:true}BrowserTest.translatePrefs=c;BrowserTest.os_types=[["x11","UNIX","UNX"],["linux","LINUX","LNX"],["mac","Mac","MAC"],["win","Windows","WIN"]];BrowserTest.mac_types=[["os x","Mac OS X","OSX"],["ppc","Mac PPC","PPC"],["mac_powerpc","Mac PPC","PPC"],["68k","Mac 68K","68K"]];BrowserTest.win_types=[["nt 10.0","Windows 10","10"],["nt 6.3","Windows 8.1","8.1"],["nt 6.2","Windows 8","8"],["nt 6.1","Windows 7","7"],["nt 6.0","Windows Vista","Vista"],["nt 5.2","Windows Server 2003","Server 2003"],["nt 5.1-","Windows XP2","XP"],["sv1","Windows XP","XP"],["nt 5.1","Windows XP","XP"],["nt 5.01","Windows 20001","2000"],["nt 5.0","Windows 2000","2000"],["nt 4.0","Windows NT","NT"],["9x","Windows ME","ME"],["98","Windows 98","98"],["95","Windows 95","95"],["ce","Windows CE","CE"]];BrowserTest.browser_types=[["konqueror","Konqueror","KR"],["omniweb","Omniweb","OW"],["opera","Opera","OA"],["webtv","WebTV","WT"],["aol","Aol","AL"],["edge","Edge","ED"],["chrome","Chrome ","CH"],["safari","Safari ","SF"],["firefox","Firefox","FF"],["msie","Internet Explorer","IE"]];BrowserTest.browser_required=a(ifs.env.i18nStrings.browCompat.browser_required.toLowerCase());BrowserTest.os_required=a((ifs.env.i18nStrings.browCompat.os_required||"false").toLowerCase());BrowserTest.cookies_required=a(ifs.env.i18nStrings.browCompat.cookies_requires.toLowerCase());BrowserTest.min_ssl_size=parseInt(ifs.env.i18nStrings.browCompat.ssl_key_size||128,0);BrowserTest.ssl_required=a(ifs.env.i18nStrings.browCompat.ssl_key_size_required.toLowerCase());BrowserTest.ssl_key_size=ifs.env.i18nStrings.browCompat.ssl_key_size;BrowserTest.screen_required=a(ifs.env.i18nStrings.browCompat.screen_required.toLowerCase());BrowserTest.min_width=parseInt(ifs.env.i18nStrings.browCompat.screen_width||0,0);BrowserTest.min_height=parseInt(ifs.env.i18nStrings.browCompat.screen_height||0,0);BrowserTest.adobe_required=a(ifs.env.i18nStrings.browCompat.adobe_required.toLowerCase());BrowserTest.popups_required=a(ifs.env.i18nStrings.browCompat.popups_required.toLowerCase());BrowserTest.min_adobe_version=6;BrowserTest.true_text=ifs.env.i18nStrings.browCompat.test_successful;BrowserTest.false_text=ifs.env.i18nStrings.browCompat.browser_test_fail;BrowserTest.installed_text="TEXT INSTALLED";BrowserTest.not_installed_text="TEXT NOTINSTALLED";BrowserTest.version_text="TEXT VERSION";BrowserTest.mozilla_compatible="TEXT MOZILLACOMPATIBLE";BrowserTest.unknown_browser="TEXT UNKNOWN";BrowserTest.unknown_os="TEXT UNKNOWN";BrowserTest.unknown_screen_res="TEXT UNKNOWN";BrowserTest.message_display="success";BrowserTest.os_variants=BrowserTest.mac_types.concat(BrowserTest.win_types);ifs.env.i18nStrings.browCompat.browsers=ifs.env.i18nStrings.browCompat.browsers?ifs.env.i18nStrings.browCompat.browsers:"IE 8, FF, SF 6, CH, ED";BrowserTest.supported_browsers=c(ifs.env.i18nStrings.browCompat.browsers,BrowserTest.browser_types);BrowserTest.pref_matrix=[["all",BrowserTest.os_variants,BrowserTest.supported_browsers,"","","",""]]};var BrowserTest=BrowserTest||{};BrowserTest.prefs=(function(){function b(f){var d="";for(var e=0;e<f.length;e++){var g=f.charAt(e);if(g!=" "){d+=g}}return d}function c(g){var d=b(g);var e=/[0-9]/;for(var f=0;f<d.length;f++){var h=d.charAt(f);if(!e.test(h)){return false}}return true}function a(e,g){BrowserTest.min_vers;var i=e.split(".");var f=g.split(".");var h;if(i.length==1){h=e}else{if(i.length>=2){h=i[0]+"."+i[1]}}var d;if(f.length==1){d=g}else{if(f.length>=2){d=f[0]+"."+f[1]}}if(Number(h)>=Number(d)){return true}else{BrowserTest.min_vers=d}return false}return{init:function(){if(!BrowserTest.pref_matrix||BrowserTest.pref_matrix.length==0){BrowserTest.os_okay=true;BrowserTest.browser_okay=true;BrowserTest.cookies_okay=true;BrowserTest.javascript_okay=true;BrowserTest.ssl_okay=true;BrowserTest.screen_res_okay=true;BrowserTest.adobe_okay=true}else{var f="";var s=-1;for(var w=0;w<BrowserTest.pref_matrix.length;w++){var m=BrowserTest.pref_matrix[w][0];var e=BrowserTest.pref_matrix[w][1];f+=BrowserTest.pref_matrix[w][2];if(w<BrowserTest.pref_matrix.length-1){f+=","}if(BrowserTest.os_type==m){for(var q=0;q<e.length;q++){var h=e[q];if(os_variant==""||h==os_variant){BrowserTest.os_okay=true;s=w;break}}}}if(!BrowserTest.os_required){BrowserTest.os_okay=true}if(!BrowserTest.browser_required){BrowserTest.browser_okay=true}else{if(s==-1){var d=f.split(",")}else{var d=BrowserTest.pref_matrix[s][2]}for(var y=0;y<d.length;y++){var v=d[y];if(v.indexOf("|")==-1){v+="|na"}else{if(v.indexOf("|")==(v.length-1)){v+="na"}}var p=v.split("|");var g=p[0];var t=(p[1]!="na")?p[1]:"";if(BrowserTest.br_type==g){if(a(BrowserTest.browser_version,t)){BrowserTest.browser_okay=true}else{if(BrowserTest.browser_required){BrowserTest.browser_okay=false}}break}}}BrowserTest.javascript_okay=true;var n=BrowserTest.ssl_key_size;if(true||n>=BrowserTest.min_ssl_size){BrowserTest.ssl_okay=true}else{BrowserTest.ssl_okay=false}if(!BrowserTest.screen_required){BrowserTest.screen_res_okay=true}else{if(true||s==-1){var r=BrowserTest.min_width;var u=BrowserTest.min_height}else{var r=(BrowserTest.pref_matrix[s][4]!="")?BrowserTest.pref_matrix[s][4]:BrowserTest.min_width;var u=(BrowserTest.pref_matrix[s][5]!="")?BrowserTest.pref_matrix[s][5]:BrowserTest.min_height}if(!c(r)){BrowserTest.screen_width=-1;r=0}if(!c(u)){BrowserTest.screen_height=-1;u=0}if(BrowserTest.screen_width>=r&&BrowserTest.screen_height>=u){BrowserTest.screen_res_okay=true}}if(BrowserTest.adobe_required){if(true||s==-1){var k=true}else{var k=(pref_matrix[s][6]!="")?pref_matrix[s][6]:true}if((!BrowserTest.adobe_okay||BrowserTest.adobe_version<BrowserTest.min_adobe_version)&&k==true){BrowserTest.adobe_okay=false}}}var x=BrowserTest.browser+" "+BrowserTest.browser_version;if(BrowserTest.browser==""){x=BrowserTest.unknown_browser}var j=BrowserTest.screen_width+" x "+BrowserTest.screen_height;if(BrowserTest.screen_width<0&&BrowserTest.screen_height<0){j=BrowserTest.unknown_screen_res}if(x==BrowserTest.unknown_browser||j==BrowserTest.unknown_screen_res){BrowserTest.message_display="unknown"}else{if((BrowserTest.browser_required&&!BrowserTest.browser_okay)||(BrowserTest.cookies_required&&!BrowserTest.cookies_okay)||(BrowserTest.ssl_required&&!BrowserTest.min_ssl_size)||(BrowserTest.screen_required&&!BrowserTest.screen_res_okay)||(BrowserTest.adobe_required&&!BrowserTest.adobe_okay)){BrowserTest.message_display="failed"}}var l=document.getElementById("browserCompat");l.style.display="block";BrowserTest.check.results();if(true||!document.addEventListener){BrowserTest.windowOpened=true;window.setTimeout(function(){BrowserTest.check.results()},10)}}}}());var BrowserTest=BrowserTest||{};BrowserTest.check=(function(i){var a=navigator.userAgent.toLowerCase();var e="";var h="";var l="";var f=false;var k="";var b="";var g="";BrowserTest.browser_version="";BrowserTest.br_type="";BrowserTest.os_okay=false;BrowserTest.browser_okay=false;BrowserTest.cookies_okay=false;BrowserTest.javascript_okay=false;BrowserTest.ssl_okay=false;BrowserTest.screen_res_okay=false;BrowserTest.adobe_okay=false;function j(d){place=a.toLowerCase().indexOf(d)+1;if(d=="msie"&&place==0){place=a.indexOf("Trident")+1}return place}function c(q,d,t){var u=/[a-bA-Z0-9\\.]/;var n=false;var s=0;var o=0;var m="";if(m==""&&navigator.appName=="Netscape"){var v=new RegExp("Trident.*rv:([0-9]{1,}[.0-9]{0,})");var w=v.exec(navigator.userAgent);if(w&&w.length>1){m=w[1]}else{var v=new RegExp("Edge([0-9]{1,}[.0-9]{0,})");w=v.exec(q);m=w&&w.length>1?w[1]:m}console.log("charset",m)}if(m==""&&a.indexOf("Trident/")!=-1){var p=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");var w=p.exec(navigator.userAgent);if(w&&w.length>1){m=w[1]}}if(m!=""){return m}while(!n){var r=q.charAt(d+o);if(!u.test(r)){n=true}else{if(t){if(r=="."){s++}}if(s<=1){m+=r}o++}}return m}return{init:function(d){document.body.className="browser-compat-loading";document.getElementById("brow-result-text").style.display="none";BrowserTest.definitions();i.getElementById("brow-version-error").style.display="none";i.getElementById("brow-js-error").style.display="none";i.getElementById("brow-cookies-error").style.display="none";i.getElementById("brow-ssl-error").style.display="none";i.getElementById("brow-size-error").style.display="none";i.getElementById("brow-acrobat-error").style.display="none";BrowserTest.os_okay=false;BrowserTest.browser_okay=false;BrowserTest.cookies_okay=false;BrowserTest.cookies3p_okay=true;BrowserTest.javascript_okay=false;BrowserTest.ssl_okay=false;BrowserTest.screen_res_okay=false;BrowserTest.adobe_okay=false;BrowserTest.setOptions(BrowserTest,d);for(var n=0;n<BrowserTest.os_types.length;n++){l=BrowserTest.os_types[n][0];if(j(l)){e=BrowserTest.os_types[n][1];break}}for(var n=0;n<BrowserTest.os_variants.length;n++){if(j(BrowserTest.os_variants[n][0])){h=BrowserTest.os_variants[n][0];e=BrowserTest.os_variants[n][1];break}}for(var n=0;n<BrowserTest.browser_types.length;n++){BrowserTest.br_type=BrowserTest.browser_types[n][0];BrowserTest.browser=BrowserTest.browser_types[n][1];if(j(BrowserTest.br_type)){BrowserTest.browser=BrowserTest.browser_types[n][1];if((BrowserTest.br_type=="msie")&&j("aol")){BrowserTest.browser+=" AOL"}break}}if(BrowserTest.br_type=="safari"){BrowserTest.browser_version=c(a,a.indexOf("version/")+8,false)}else{BrowserTest.browser_version=c(a,a.indexOf(BrowserTest.br_type)+BrowserTest.br_type.length+1,false)}if(!BrowserTest.cookies_okay){document.cookie="cookietest=avalue;path=/";var t=document.cookie.indexOf("cookietest");if(t>=0){document.cookie="cookietest=avalue;path=/;expires=Mon, 31 Dec 2000 18:18:33 GMT";BrowserTest.cookies_okay=true}else{BrowserTest.cookies_okay=false}}b=screen.width;g=screen.height;if(b<0||b==""){b=-1}if(g<0||g==""){g=-1}BrowserTest.screen_res_okay=b>=BrowserTest.min_width&&g>=BrowserTest.min_height;if(navigator.plugins&&navigator.plugins.length){var s=navigator.plugins["Adobe Acrobat"];if(s){f=true;if(s.description){var q=s.description;k=q.substr(q.indexOf("Netscape ")+9)}}}if(!f){if(navigator.mimeTypes&&navigator.mimeTypes.length){var s=navigator.mimeTypes["application/pdf"];if(s&&s.enabledPlugin){f=true}}if(window.ActiveXObject||true){var p=null;try{p=new ActiveXObject("AcroPDF.PDF")}catch(o){}if(!p){try{p=new ActiveXObject("PDF.PdfCtrl")}catch(o){}}if(!!p){f=true;k=p.GetVersions().split(",");k=k[0].split("=");k=parseFloat(k[1])}}if(k!=""&&k>0){k+=".0"}if(!f){for(key in navigator.plugins){var m=navigator.plugins[key];if(m.name=="Adobe Acrobat"||m.name=="Portable Document Format"){f=true}}}}BrowserTest.adobe_okay=f;f=false;BrowserTest.prefs.init()},results:function(o){document.getElementById("browserCompat").style.display="block";i.getElementById("lightbox-content").style.display="block";BrowserTest.popUpsAllowed=!BrowserTest.check.popUpBlocked();BrowserTest.focusRestrictionWithInPopup();if(BrowserTest.cookies3p_okay===false){BrowserTest.cookies_okay=BrowserTest.cookies3p_okay;BrowserTest.message_display=BrowserTest.cookies_required?"failed":BrowserTest.message_display}document.body.className="browser-compat-loaded";if(BrowserTest.browser=="Edge"||(BrowserTest.browser.match("Safari")&&parseInt(BrowserTest.browser_version,0)>6)){BrowserTest.adobe_okay=true}var m=ifs.env.i18nStrings.browCompat.yes;var n=ifs.env.i18nStrings.browCompat.no;if(BrowserTest.popups_required&&!BrowserTest.popUpsAllowed){BrowserTest.message_display="failed"}if(BrowserTest.message_display!="success"){var d=true;if(BrowserTest.browser_required&&!BrowserTest.browser_okay){var p=BrowserTest.min_vers?"brow-version-error-x":"brow-version-error";i.getElementById("brow-ver-num").innerHTML=BrowserTest.min_vers;i.getElementById(p).style.display="block";d=false}if(BrowserTest.os_required&&BrowserTest.os_okay){i.getElementById("brow-os-error").style.display="block";d=false}if(BrowserTest.cookies_required&&!BrowserTest.cookies_okay){i.getElementById("brow-cookies-error").style.display="block";d=false}if(BrowserTest.popups_required&&!BrowserTest.popUpsAllowed){i.getElementById("brow-popup-error").style.display="block";d=false}if(BrowserTest.screen_required&&!BrowserTest.screen_res_okay){i.getElementById("brow-size-error").style.display="block";d=false}if(BrowserTest.adobe_required&&!BrowserTest.adobe_okay){i.getElementById("brow-acrobat-error").style.display="block";d=false}if(!d){i.getElementById("brow-result-text").innerHTML=BrowserTest.false_text;i.getElementById("brow-result").className="brow-result error"}else{if(d){BrowserTest.message_display="success"}}}if(BrowserTest.message_display=="success"){i.getElementById("brow-result").className="brow-result success";i.getElementById("brow-result-text").innerHTML=BrowserTest.true_text}i.getElementById("brow-note-text").innerHTML=ifs.env.i18nStrings.browCompat.test_again;i.getElementById("brow-version").innerHTML=BrowserTest.browser+" "+BrowserTest.browser_version;i.getElementById("brow-os").innerHTML=e;i.getElementById("brow-js").innerHTML=BrowserTest.javascript_okay?m:n;i.getElementById("brow-cookies").innerHTML=BrowserTest.cookies_okay?m:n;i.getElementById("brow-popup").innerHTML=BrowserTest.popUpsAllowed?m:n;i.getElementById("brow-ssl").innerHTML=BrowserTest.ssl_key_size;i.getElementById("brow-size").innerHTML=b+"x"+g;i.getElementById("brow-acrobat").innerHTML=BrowserTest.adobe_okay?m:n;document.getElementById("brow-result-text").style.display="block";window.setTimeout(function(){var q=window.location.href;window.history.pushState("clear_popup",document.title,q.replace(/&popup=[01]/,""))},5000);window.setTimeout(function(){window.focus()},10)},popUpBlocked:function(){var d;var m=window.location.href.match(/&popup=(0|1)/)||[];if(m.length==0&&window.history&&window.history.pushState){var n=window.location.href;if(window.location.href.match(/\?/)){window.history.pushState("clear_popup",document.title,n.replace("#test","&popup=0#test"))}else{window.history.pushState("clear_popup",document.title,n.replace("#test","?&popup=0#test"))}d=window.open(BrowserTest.help_location_href,"_blank","width=100, height=100 status=no, toolbar=no, menubar=no, location=no, addressbar=no, top=10000, left=10000, visible=false, alwaysLowered=yes");BrowserTest.windowOpened=false}else{var m=window.location.href.match(/&popup=(0|1)/);if(m&&m.length>0){return !!+m[1]}return BrowserTest.popUpsAllowed}try{d.blur()}catch(o){}if(d&&d.closed){p("1");return true}else{try{d.close()}catch(o){p("1");return true}}function p(r){var q=window.location.href;window.history.pushState("popup","popup"+document.title,q.replace(/&popup=[01]/,"&popup="+r))}return false}}}(document));var BrowserTest=BrowserTest||{};var noop=noop||function(){};var console=(window.console=window.console||{log:function(){noop()}});if(false&&!BrowserTest.autoLoad){document.body.style.overflow="hidden"}(function(){BrowserTest.setOptions=function(i,h){for(var j in h){if(i.hasOwnProperty(j)){i[j]=h[j]}}};function g(j,l,i,k){var h=k||false;if(!j){return}if(j.addEventListener){j.addEventListener(l,i,h)}else{j.attachEvent("on"+l,i,h)}}function a(h){var h=h||{preventDefault:noop};if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}}BrowserTest.focusRestrictionWithInPopup=function(){var m=document.getElementById("lightbox-content").querySelectorAll('[tabindex="0"],a[href],input,button,textarea');var l=[];var k;for(var h=0;h<m.length;h++){var j=m[h];if(j&&j.getAttribute("type")!="hidden"&&j.getAttribute("tabindex")!="-1"){l.push(j)}}if(l.length>0){k=l[0];setTimeout(function(){document.getElementById("browserCompat").setAttribute("role","alert");document.getElementById("browserCompat").setAttribute("aria-describedby","lightbox-content");k.focus()},3000);k.addEventListener("keydown",function(i){if(i.shiftKey==true&&i.keyCode==9){i.preventDefault()}});var n=l[l.length-1];n.addEventListener("keydown",function(i){if(i.shiftKey==false&&i.keyCode==9){i.preventDefault()}})}};function e(j){a(j);document.body.className="browser-compat-loading";if(!BrowserTest.autoLoad){document.body.style.overflow="hidden"}window.location.hash="#test";if(!BrowserTest.autoLoad||BrowserTest.testAgain){var i;if(window.location.href.match(/&reload=[0-9\.]+/)){var h=c();i=h.replace(/&reload=[0-9\.]+/,"&reload="+Math.random())}else{window.location.search+="&reload="+Math.random();i=c()}window.location.href=i}else{if(BrowserTest.autoLoad&&!window.location.href.match(/&popup/)){window.location.reload()}}}BrowserTest.limitPopups=function(h){var j=window.location.href;var i=j.match(/&popup=(true|false)/);if(i&&i.length>0){j.replace(/&popup=(true|false)/,"&popup="+Math.random())}else{window.location.search+="&popup="+Math.random()}};function c(){if(!ifs.env.context){throw"A valid, nonempty ifs.env.context is required for Browser Compatibility test."}var h=ifs.env.context?ifs.env.context:"/tob/live/usp-core";if(window.location.href.match(/browser-compatibility/)){return window.location.href}else{h+="/app/login/consumer"}return window.location.protocol+"//"+window.location.host+h+window.location.search+window.location.hash}function f(h){BrowserTest.testAgain=true;e(h)}function d(h){a(h);if(window.location.hash=="#test"){window.location.hash="";setTimeout(function(){var i=document.getElementById("test-browser");if(i){i.focus()}},300)}document.body.style.overflow="auto";document.getElementById("browserCompat").style.display="none"}function b(h){if(h.data=="3rdPCookie=false"){window.setTimeout(function(){if(document.getElementById("browserCompat").style.display=="block"||window.location.hash=="#test"){BrowserTest.windowOpened=true;BrowserTest.check.init({cookies3p_okay:false})}},10)}else{if(h.data=="3rdPCookie=true"){if(document.getElementById("browserCompat").style.display=="block"||window.location.hash=="#test"){BrowserTest.check.init({cookies3p_okay:true})}}}}if(BrowserTest.autoLoad==true&&!window.location.href.match(/#test/)){window.location.hash="#test";e(window.event);ifs.env.i18nStrings.browCompat.browser_compatibility="true"}if(ifs.env.i18nStrings.browCompat.browser_compatibility=="false"){return}g(window,"message",b,false);document.onkeydown=function(h){h=h||window.event||{keyCode:undefined,preventDefault:noop};if(h.keyCode==27){d(h)}};if(Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get){(function(){var h=Object.getOwnPropertyDescriptor(Element.prototype,"innerText");Object.defineProperty(Element.prototype,"textContent",{get:function(){return h.get.call(this)},set:function(i){return h.set.call(this,i)}})})()}if(window.location.hash=="#test"){BrowserTest.check.init()}window.onload=function(){if(BrowserTest.autoLoad==true&&!window.location.href.match(/#test/)){e(window.event)}if(ifs.env.i18nStrings.browCompat.browser_compatibility!="false"){var h=document.getElementById("brow-compat-link-disp");if(h){h.style.display="block"}}g(document.getElementById("test-browser"),"click",e,false);g(document.getElementById("close-browser-compat"),"click",d,false);g(document.getElementById("brow-close-btn"),"click",d,false);g(document.getElementById("brow-again-btn"),"click",f,false)}}());