var loginPage;Ext.onReady(function(){ifs.showMe("main",false);ifs.showMe("loginContentLoader",true);setTimeout(function(){var a=Ext.get("userid");if(isErrorDivSet()==true){ARIA.setProperty(a,"aria-invalid","true");var b=ARIA.ariaReplaceHTMLTagtoText(Ext.get("errors").dom.innerHTML);if(Ext.isMac){setTimeout(function(){ARIA.setAlertMessage(b)},2500)}else{ARIA.setAlertMessage(b)}}else{getLoginContent()}if(ifs.loginPage.commonComponentsURL){a.down("input").dom.focus()}else{a.dom.focus()}},500);if(ifs.loginPage.commonComponentsURL){loginPage=Ext.create("LoginPage");loginPage.initLogin()}ifs.showMe("loginContentLoader",false);ifs.showMe("main",true)});function showCookieError(){document.getElementById("password").value="";document.getElementById("userid").value="";document.getElementById("cookieError").style.display="block";document.getElementById("cookieInfo").style.display="block"}function getLoginContent(){var f;var a=Ext.get("headerDiv").dom.innerHTML;var h=Ext.get("title").dom.innerHTML;var b=Ext.get("global-menu");var e=(Ext.isEmpty(b))?"":b.dom.innerHTML;var i=Ext.get("leftLinksDiv").dom.innerHTML;var g=Ext.get("intuit-logo").dom.innerHTML;var d=Ext.get("forgotCredentialsLink");var c=Ext.isEmpty(d)?"":d.dom.innerHTML;f=ARIA.ariaReplaceHTMLTagtoText(h)+" "+ARIA.ariaReplaceHTMLTagtoText(e)+" "+a+" ";f+=ifs.env.i18nStrings.loginPage.UserName+" "+ifs.env.i18nStrings.loginPage.Password+" "+ifs.env.i18nStrings.loginPage.loginButtonLabel+" "+ifs.env.i18nStrings.loginPage.buttonText+" ";f+=ARIA.ariaReplaceHTMLTagtoText(c)+" "+ARIA.ariaReplaceHTMLTagtoText(i)+" "+g;ARIA.setAlertMessage(f)}function isCookieEnabled(){var a=new Date();a.setTime(a.getTime()+1800000);setCookie("testCookie","cookie",a,false,false,false);if(document.cookie.indexOf("testCookie")==-1){return false}a=new Date();a.setTime(a.getTime()-1800000);setCookie("testCookie","cookie",a,false,false,false);return true}function setCookie(c,e,a,g,d,f){var b=c+"="+e+((a)?"; expires="+a.toGMTString():"")+((g)?"; path="+g:"")+((d)?"; domain="+d:"")+((f)?"; secure":"");document.cookie=b}function submitForm(){if(!isDupSubmit()){if(isCookieEnabled()){document.getElementById("testjs").value="true";document.getElementById("testcookie").value="true";if(ifs.loginPage.cdiFingerprintEnabled==="true"){getFingerprint()}return true}else{if(isErrorDivSet()){document.getElementById("errors").style.display="none"}showCookieError();return false}}else{return false}}function changeForAttributeForLabel(c,b){var a=c.down("input").dom.id;var d=Ext.DomQuery.selectNode(b);d.setAttribute("for",a)}function checkCookieStatus(){if(!isCookieEnabled()){if(isErrorDivSet()){document.getElementById("errors").style.display="none"}showCookieError()}}function isErrorDivSet(){var a=document.getElementById("errors");if(typeof(a)!="undefined"&&a!=null){return true}return false}function isDupSubmit(){var a=true;var b=document.getElementById("dscheck");if(b!=null&&b.value=="0"){a=false;b.value="1";setTimeout(enableMe,5000)}return a}function onSubmit(){document.getElementById("loginLoadingMask").style.display="inline-block";if(!!Ext.fly("useridExt")){document.getElementById("useridExt").value=loginPage.loginComponents.usernameField.getTextField().getValue();document.getElementById("passwordExt").value=loginPage.loginComponents.passwordField.getTextField().getValue()}if(submitForm()){document.getElementById("loginForm").submit()}else{document.getElementById("loginLoadingMask").style.display="none"}}function enableMe(){document.getElementById("dscheck").value="0"}function addRemoveAriaAttribute(a){a.down("input").parent().dom.removeAttribute("role");a.dom.setAttribute("role","presentation")}function handleEnter(a){if(a.keyCode===13){onSubmit()}}function getFingerprint(){var b={excludeUserAgent:true,excludeLanguage:true,excludeColorDepth:true,excludeScreenResolution:true,detectScreenOrientation:true,excludeTimezoneOffset:true,excludeSessionStorage:true,excludeIndexedDB:true,excludeAddBehavior:true,excludeOpenDatabase:true,excludeCpuClass:true,excludePlatform:true,excludeDoNotTrack:true,excludeCanvas:true,excludeWebGL:true,excludeFlashFonts:true,excludeJsFonts:true,excludepluginsKey:true};var f=[];var c=0;var a=function(i,k,j){var l=new Date();var h=new Fingerprint2(i,k);h.get(function(m){var n=new Date();k.testDate=l;k.hash=m;k.option=j.replace("exclude","");k.executionTime=(n-l)})};for(var e in b){var g=(Ext.decode(Ext.encode(b)));g[e]=false;var d=new Object();a(g,d,e);if(d.option==="pluginsKey"){document.getElementById("fingerprintPluginsKeyExt").value=d.hash}else{if(d.option==="JsFonts"){document.getElementById("fingerprintJsFontsExt").value=d.hash}else{if(d.option==="Language"){document.getElementById("fingerprintLanguageExt").value=d.hash}else{if(d.option==="TimezoneOffset"){document.getElementById("fingerprintTimezoneOffsetExt").value=d.hash}else{if(d.option==="CpuClass"){document.getElementById("fingerprintCpuClassExt").value=d.hash}}}}}f[c++]=d}return f}Ext.define("LoginPage",{config:{context:ifs.env.context},initLogin:function(){var b=this,c=(ifs.loginPage.cdiFingerprintEnabled==="true");b.loginComponents={loginButton:Ext.create("IFS.view.form.Button",{renderTo:Ext.get("submitButton"),text:ifs.env.i18nStrings.loginPage.loginButtonLabel,height:42,tabIndex:"0",primary:true,standardSubmit:true}),usernameField:Ext.create("IFS.view.form.Input",{renderTo:Ext.get("userid"),inputConfig:{inputType:"text",maxLength:30,enforceMaxLength:true,enableKeyEvents:true,tabIndex:"0",listeners:{keypress:function(d,f){handleEnter(f)},afterrender:function(){this.el.down("input").set({"aria-label":ifs.env.i18nStrings.loginPage.UserName,"aria-required":"true"});changeForAttributeForLabel(this.el,".user-label");addRemoveAriaAttribute(this.el)}}}}),passwordField:Ext.create("IFS.view.form.Input",{renderTo:Ext.get("password"),inputConfig:{inputType:"password",maxLength:32,enforceMaxLength:true,enableKeyEvents:true,tabIndex:"0",listeners:{keypress:function(d,f){handleEnter(f)},afterrender:function(){this.el.down("input").set({"aria-label":ifs.env.i18nStrings.loginPage.Password,"aria-required":"true"});changeForAttributeForLabel(this.el,".password-label");addRemoveAriaAttribute(this.el)}}}})};if(c){b.loginComponents.fingerprintPluginsKeyField=Ext.create("IFS.view.form.Input",{renderTo:Ext.get("fingerprintPluginsKey"),inputConfig:{inputType:"hidden",maxLength:32,enforceMaxLength:true}});b.loginComponents.fingerprintJsFontsField=Ext.create("IFS.view.form.Input",{renderTo:Ext.get("fingerprintJsFonts"),inputConfig:{inputType:"hidden",maxLength:32,enforceMaxLength:true}});b.loginComponents.fingerprintLanguageField=Ext.create("IFS.view.form.Input",{renderTo:Ext.get("fingerprintLanguage"),inputConfig:{inputType:"hidden",maxLength:32,enforceMaxLength:true}});b.loginComponents.fingerprintTimezoneOffsetField=Ext.create("IFS.view.form.Input",{renderTo:Ext.get("fingerprintTimezoneOffset"),inputConfig:{inputType:"hidden",maxLength:32,enforceMaxLength:true}});b.loginComponents.fingerprintCpuClassField=Ext.create("IFS.view.form.Input",{renderTo:Ext.get("fingerprintCpuClass"),inputConfig:{inputType:"hidden",maxLength:32,enforceMaxLength:true}})}Ext.get("submitButton").on("click",onSubmit);var a=Ext.get("submitButton").down("button");if(!Ext.isEmpty(a)){a.dom.setAttribute("aria-label",ifs.env.i18nStrings.loginPage.loginButtonInformation)}b.loginComponents.usernameField.getTextField().focus()}});