Ext.define("UpdateSettings",{config:{phoneNumCaretPos:0,displayPassText:false},constructor:function(a){this.initialize()},initialize:function(){this.addListenerWithScope("userName","keyup",this.userNameKeyUpHandler);this.addListenerWithScope("userName","blur",this.userNameBlurHandler);this.addListenerWithScope("userName","paste",this.userNamePasteHandler);this.addListenerWithScope("sendPassword","click",this.sendPasswordClickHandler);this.addListenerWithScope("closePopUp","click",this.closePopUpHandler);this.addListenerWithScope("contactMeGoBack","click",this.goBackToLoginHandler);this.addListenerWithScope("tryAgain","click",this.closePopUpHandler);this.addListenerWithScope("sendAgain","click",this.sendAgainClickHandler);this.addListenerWithScope("confirmPassword","click",this.confirmPasswordClickHandler);this.addListenerWithScope(Ext.getDom("confirmedPassword"),"keydown",this.confirmedPasswordKeyHandler);this.addListenerWithScope("showBasicInfo","click",this.showBasicInfoClickHandler);this.addListenerWithScope("changePassword","click",this.changePasswordClickHandler);this.addListenerWithScope("newPass","focus",this.newPassFocusHandler);this.addListenerWithScope("newPass","blur",this.newPassBlurHandler);this.addListenerWithScope("newPass","keyup",this.passKeyUpHandler);this.addListenerWithScope("newPass","paste",this.passPasteHandler);this.addListenerWithScope("retypePass","focus",this.retypePassFocusHandler);this.addListenerWithScope("retypePass","blur",this.retypePassBlurHandler);this.addListenerWithScope("retypePass","keyup",this.passKeyUpHandler);this.addListenerWithScope("retypePass","paste",this.passPasteHandler);this.addListenerWithScope(Ext.get(Ext.DomQuery.selectNode("div#uspNavSkipLink")),"click",this.skipMaincontent);this.addListenerWithScope("recoverUsernameEmail","focus",this.forgotUsernameValidationHandler);this.addListenerWithScope("recoverUsernameEmail","blur",this.forgotUsernameValidationHandler);this.addListenerWithScope("recoverUsernameEmail","keyup",this.forgotUsernameValidationHandler);this.addListenerWithScope("recoverUsernameEmail","paste",this.forgotUsernameValidationHandler);this.addListenerWithScope("forgotUsernameLink","click",this.forgotUsernameHandler);this.addListenerWithScope("goBackToLogin","click",this.goBackToLoginHandler);this.addListenerWithScope("goToLoginLink","click",this.goBackToLoginHandler);this.addListenerWithScope("closeForgotUsernamePopUp","click",this.closeForgotUsernamePopUpHandler);this.addListenerWithScope("recoverUsername","click",this.recoverUsernameClickHandler);this.addListenerWithScope("sendPasswordBk","keyup",this.sendPasswordKeyHandler);this.addListenerWithScope("forgotUsernameBk","keyup",this.forgotUsernameKeyHandler);this.addListenerWithScope("contactMeBkContainer","keyup",this.contactMeBkContainerKeyHandler);this.addListenerWithScope("uspUsernameRecoveryTryAgain","click",this.forgotUsernameHandler);this.addListenerWithScope("uspUsernameRecoveryContactUs","click",this.openContactMeLightboxHandler);this.addListenerWithScope("uspEmailNotFoundContactMeLink","click",this.openContactMeLightboxHandler);this.addListenerWithScope("closeContactMePopUp","click",this.closeContactMeLightboxHandler);var a=Ext.get("userName");ARIA.setProperty(a,"aria-describedby","userTextDiv");var b=Ext.get("sendPassword")},addListenerWithScope:function(a,b,e,d){var c=Ext.get(a);if(Ext.isEmpty(d)){d=this}if(c){c.on(b,e,d)}},showMe:function(b,a){var c=Ext.getDom(b);if(c){c.style.display=a?"block":"none"}},enableMe:function(b,a){var c=Ext.getDom(b);if(c){if(a){c.removeAttribute("disabled")}else{c.setAttribute("disabled","true")}}},repeat:function(b,a){return new Array(a+1).join(b)},updateMyText:function(a,c){var b=Ext.getDom(a);if(b){b.innerHTML=c}},userNameKeyUpHandler:function(b,a){this.enableCall();Ext.getDom("basicInfo").removeAttribute("role");if(b.keyCode===13&&Ext.fly("sendPassword").getAttribute("disabled")!=="true"){this.sendPasswordClickHandler()}},userNamePasteHandler:function(b,a){this.enableMe("sendPassword",true)},userNameBlurHandler:function(){var a=Ext.getDom("userName").value;if(!a){this.enableMe("sendPassword",false)}},skipMaincontent:function(){Ext.get("newPass").focus()},sendPasswordClickHandler:function(d,b){var c=this;var f=Ext.getDom("errorSendPassword");c.showMe(f,false);c.updateMyText(f,"");this.displayPassText=true;var a=Ext.getDom("lmSendPassword");var e=Ext.getDom("sendPassword");c.showMe(a,true);c.enableMe(e,false);Ext.Ajax.request({url:"authUpdate/requestStatus",params:{userName:Ext.getDom("userName").value,phoneNumber:internationalNumber.phoneNumber,phoneCountryCode:internationalNumber.getCountryCode(),csrfToken:xToken},method:"POST",success:function(g,k){c.showMe(a,false);var h=Ext.decode(g.responseText,true);if(h&&h.model.result==="success"){c.enableMe(e,true);Ext.getDom("confirmedPassword").value="";Ext.getDom("userIdForSubmit").value=Ext.getDom("userName").value;c.updateMyText("errorSendingAgain","");c.showMe("passwordConfirmContent",true);c.showMe("errorSendingAgain",false);ifs.showLightbox("sendPasswordBk","null","true");var m=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./);if(Ext.isIE||m){ARIA.readConfirmPopupInformation()}else{ARIA.setRole(Ext.get("sendPasswordBk").dom,"alert");ARIA.setProperty(Ext.get("sendPasswordBk").dom,"aria-live","polite")}var l=Ext.getDom(internationalNumber.phoneField.inputId).value;if(internationalNumber.getCountryCode()!="1"){l="+"+internationalNumber.getCountryCode()+" "+l}c.updateMyText("userPhoneNumber",l)}else{var j=true;var i=ifs.env.i18nStrings.updateSettings.forgotPassword.couldNotSendPasswordGeneral;if(h!=null){if(h.model.errorCode!=null&&h.model.errorCode==="27118"){window.top.location.href=ifs.env.context+"/app/logout?reason=serviceStopped";return}if(h.model.isUserOnHold||h.model.featureDisabled){c.enableMe(e,false);c.enableMe(internationalNumber.phoneField.inputId,false);c.enableMe("userName",false);j=false}else{if(h.model.errorCode!=null&&h.model.errorCode==="26108"){i=ifs.env.i18nStrings.updateSettings.forgotPassword.validPhoneRequired}}if(h.model.errorInfo!=null){i=h.model.errorInfo;setTimeout(function(){ARIA.setAlertMessage(i)},1000)}}c.enableMe(e,j);c.updateMyText(f,i);c.showMe(f,true);Ext.getDom("basicInfo").removeAttribute("role");var n=document.createElement("span");n.setAttribute("class","x-aria-hidden");n.innerHTML="edit invalid entry";Ext.get("errorSendPassword").appendChild(n);setTimeout(function(){Ext.fly(internationalNumber.phoneField.inputId).focus()},800)}},failure:function(g,h){c.showMe(a,false);c.enableMe(e,true);c.showMe(f,true);c.updateMyText("errorSendPassword",ifs.env.i18nStrings.updateSettings.forgotPassword.validPhoneRequired);setTimeout(function(){ARIA.setAlertMessage(ifs.env.i18nStrings.updateSettings.forgotPassword.validPhoneRequired)},1000);Ext.fly("sendPassword").focus()}})},closePopUpHandler:function(b,a){ifs.hideLightbox("sendPasswordBk");setTimeout(function(){Ext.fly("sendPassword").focus()},600)},closeContactMePopUpHandler:function(c,b){var a=ifs.env.context;window.location.replace(a+"/app/")},closeForgotUsernamePopUpHandler:function(b,a){ifs.hideLightbox("forgotUsernameBk");if(Ext.getDom("contactMeGoBack")!=null&&Ext.getDom("closeContactMePopUp")!=null){Ext.get("closeContactMePopUp").removeCls("usp-focus-last-ariaext");Ext.get("contactMeGoBack").addCls("usp-focus-last-ariaext")}else{if(Ext.getDom("closeContactMePopUp")!=null){Ext.get("closeContactMePopUp").addCls("usp-focus-last-ariaext")}}Ext.fly("forgotUsernameLink").focus()},decoratePhoneNumber:function(b){var a=this;if(!b){return""}else{b=this.cleansePhoneNumber(b);b=b.concat(a.repeat("_",10-b.length));return"("+b.substr(0,3)+") "+b.substr(3,3)+"-"+b.substr(6,4)}},cleansePhoneNumber:function(a){return(a&&a.length>0)?a.replace(/[^\(0-9 \)]/g,"").substr(0,15):""},sendAgainClickHandler:function(e,c){var d=this;var g=Ext.getDom("errorSendingAgain");d.showMe(g,false);d.updateMyText(g,"");Ext.getDom("confirmedPassword").value="";var a=Ext.getDom("passwordCorrect");d.updateMyText(a,"");d.showMe(a,false);var b=Ext.getDom("doingSend");var f=Ext.getDom("sendAgain");d.showMe("passwordConfirmContent",false);d.showMe("sendingAgain",true);d.showMe(b,true);d.enableMe(f,false);Ext.Ajax.request({url:"authUpdate/sendPassword",params:{userName:Ext.getDom("userName").value,phoneNumber:internationalNumber.phoneNumber,phoneCountryCode:internationalNumber.getCountryCode()},method:"POST",success:function(h,j){d.showMe(b,false);d.enableMe(f,true);var i=Ext.decode(h.responseText,true);if(i&&i.model.result==="success"){d.showMe("sentAgain",true);d.showMe("sentAgain",false);d.showMe("sendingAgain",false);d.showMe("passwordConfirmContent",true);ARIA.setProperty(Ext.getDom("sendPasswordBk"),"aria-live","polite");ARIA.setProperty(Ext.getDom("sendPasswordBk"),"aria-atomic","true");if(this.displayPassText==true){Ext.getDom("confirmedPassword").focus()}}else{d.showMe("passwordConfirmContent",true);d.showMe("sendingAgain",false);d.updateMyText(g,ifs.env.i18nStrings.updateSettings.forgotPassword.couldNotSendPassword);d.showMe(g,true)}},failure:function(h,i){if(h.status==0){d.showMe("sendPasswordBk",false);d.showMe("bgDisabledDiv",false);d.showMe(b,false)}else{d.showMe(b,false);d.enableMe(f,true);d.showMe(g,true);d.updateMyText(g,ifs.env.i18nStrings.updateSettings.forgotPassword.couldNotSendPassword)}}})},passwordConfirmationAllowed:function(a,b){return a!=null&&a.length>0&&b!=null&&b.length>0},confirmPasswordClickHandler:function(e,c){var d=this;var h=Ext.getDom("errorSendingAgain");var b=Ext.getDom("userName").value;var g=Ext.getDom("confirmedPassword").value;if(d.passwordConfirmationAllowed(b,g)){d.showMe(h,false);d.updateMyText(h,"");var f=Ext.getDom("confirmPassword");var a=Ext.getDom("passwordCorrect");d.updateMyText(a,"");d.showMe(a,false);d.enableMe(f,false);Ext.Ajax.request({url:"authUpdate/verifyPassword",params:{userId:b,password:g},method:"POST",success:function(j,l){var k=Ext.decode(j.responseText,true);if(k&&k.model.result==="success"){var i=Ext.getDom("passwordCorrect");d.updateMyText(i,ifs.env.i18nStrings.updateSettings.forgotPassword.passwordVerified);d.showMe(i,true);ARIA.setAlertMessage(ifs.env.i18nStrings.updateSettings.forgotPassword.passwordVerified);Ext.getDom("resetPasswordForm").submit()}else{if(k!=null&&k.model.errorCode==25100){d.closePopUpHandler();d.enableMe(internationalNumber.phoneField.inputId,false);d.enableMe("userName",false);d.enableMe("sendPassword",false);d.updateMyText("errorSendPassword",k.model.errorInfo);d.showMe("errorSendPassword",true)}else{if(k!=null&&k.model.errorCode!=null&&k.model.errorCode==="27118"){window.top.location.href=ifs.env.context+"/app/logout?reason=serviceStopped"}else{d.enableMe(f,true);d.showMe("sendingAgain",false);d.updateMyText(h,ifs.env.i18nStrings.updateSettings.forgotPassword.passwordNotVerified);d.showMe(h,true);ARIA.applyAriaForError(Ext.get("sendingAgain").dom);ARIA.setProperty(Ext.get("confirmedPassword").dom,"aria-labelledby","errorSendingAgain");ARIA.setProperty(Ext.get("confirmedPassword").dom,"aria-invalid","true");Ext.fly("confirmedPassword").focus()}}}},failure:function(i,j){d.enableMe(f,true);d.showMe(h,true);d.updateMyText(h,ifs.env.i18nStrings.common.genericError)}})}else{d.showMe(h,true);d.showMe("confirmationError",true);d.updateMyText(h,ifs.env.i18nStrings.updateSettings.forgotPassword.passwordNotVerified);e.stopEvent();ARIA.applyAriaForError(Ext.get("errorSendingAgain").dom);ARIA.setProperty(Ext.get("confirmedPassword").dom,"aria-labelledby","errorSendingAgain");Ext.fly("confirmedPassword").focus();return}return},confirmedPasswordKeyHandler:function(b,a){Ext.getDom("sendPasswordBk").removeAttribute("role")},newPassFocusHandler:function(b,a){Ext.getDom("newPassLabel").innerHTML=ifs.env.i18nStrings.updateSettings.forgotPassword.newPassLabel+" "+ifs.env.i18nStrings.updateSettings.forgotPassword.placeholderLabel;ARIA.setProperty(a,"aria-labelledby","newPassLabel passHints");this.showMe("passHints",true);this.showMe("errorChangeforNewPassword",false)},newPassBlurHandler:function(b,a){var c=Ext.getDom("newPass").value;this.showMe("passHints",false);this.enableChangePassword();this.newPasswordErrorMessage(c,"errorChangeforNewPassword")},newPasswordErrorMessage:function(a,b){if(Ext.isEmpty(a)){this.updateMyText(b,ifs.env.i18nStrings.updateSettings.forgotPassword.errorNewPass);this.showMe(b,true);ARIA.setAlertMessage(ifs.env.i18nStrings.updateSettings.forgotPassword.errorNewPass)}if(a.length>0&&a.length<6){this.updateMyText("errorChangeforNewPassword",ifs.env.i18nStrings.updateSettings.forgotPassword.passwordLen);this.showMe("errorChangeforNewPassword",true);ARIA.setAlertMessage(ifs.env.i18nStrings.updateSettings.forgotPassword.passwordLen)}if(a.length>=6&&!this.testp(a)){this.updateMyText("errorChangeforNewPassword",ifs.env.i18nStrings.updateSettings.forgotPassword.passwordStrength);this.showMe("errorChangeforNewPassword",true);ARIA.setAlertMessage(ifs.env.i18nStrings.updateSettings.forgotPassword.passwordStrength)}},testp:ifs.testPassword,reTypePasswordErrorMessage:function(b,d){var a;if(Ext.isEmpty(b)){this.updateMyText(d,ifs.env.i18nStrings.updateSettings.forgotPassword.errorRetypePass);this.showMe(d,true);ARIA.setAlertMessage(ifs.env.i18nStrings.updateSettings.forgotPassword.errorRetypePass)}var c=Ext.getDom("newPass").value;if(c.length>0&&b.length>0&&c!=b){this.updateMyText(d,ifs.env.i18nStrings.updateSettings.forgotPassword.errorMatchPass);this.showMe(d,true);ARIA.setAlertMessage(ifs.env.i18nStrings.updateSettings.forgotPassword.errorMatchPass)}},passKeyUpHandler:function(b,a){if(b.keyCode==13){if(Ext.getDom("changePassword").getAttribute("disabled")==null||Ext.getDom("changePassword").getAttribute("disabled")=="false"){Ext.getDom("changePassword").click()}}if(b.keyCode!=13&&b.keyCode!=9&&b.keyCode!=16&&(b.keyCode<37||b.keyCode>40)){this.enableChangePassword()}},sendPasswordKeyHandler:function(b,a){if(b.keyCode===27){this.displayPassText=false;this.closePopUpHandler()}},forgotUsernameKeyHandler:function(b,a){if(b.keyCode===27){this.closeForgotUsernamePopUpHandler()}},contactMeBkContainerKeyHandler:function(b,a){if(b.keyCode===27){this.closeContactMeLightboxHandler()}},passPasteHandler:function(c,a){var b=this;setTimeout(function(){b.enableChangePassword()},100)},isNewPassOK:function(){var e=this;var d=Ext.getDom("newPass").value;var c=true;if(Ext.isEmpty(d)){c=false}var b=Ext.getDom("p1");if(d.length>_minPassLength-1){b.setAttribute("class","success")}else{b.setAttribute("class","passhintsdiv");c=false}var a=Ext.getDom("p2");if(e.testp(d)){a.setAttribute("class","success")}else{a.setAttribute("class","passhintsdiv");c=false}var f=Ext.getDom("uspUserName").value;if(d==f){this.updateMyText("errorChangeforNewPassword",ifs.env.i18nStrings.updateSettings.forgotPassword.passwordCondition1);this.showMe("errorChangeforNewPassword",true);ARIA.setAlertMessage(ifs.env.i18nStrings.updateSettings.forgotPassword.passwordCondition1);c=false}if(d.indexOf(" ")>-1){this.updateMyText("errorChangeforNewPassword",ifs.env.i18nStrings.updateSettings.forgotPassword.passwordCondition2);this.showMe("errorChangeforNewPassword",true);ARIA.setAlertMessage(ifs.env.i18nStrings.updateSettings.forgotPassword.passwordCondition2);c=false}if(!this.isPrintableAndPermissible(d)){this.updateMyText("errorChangePassword",ifs.env.i18nStrings.updateSettings.forgotPassword.passwordInvalidCharacters);this.showMe("errorChangePassword",true);ARIA.setAlertMessage(ifs.env.i18nStrings.updateSettings.forgotPassword.passwordInvalidCharacters);c=false}return c},isRetypePassOK:function(){var b=Ext.getDom("newPass").value;var a=Ext.getDom("retypePass").value;var c=Ext.getDom("p3");if(b.length>0&&a.length>0&&b===a){c.setAttribute("class","success");return true}else{c.setAttribute("class","passhintsdiv");return false}},enableChangePassword:function(){var b=Ext.getDom("newPass").value;var a=Ext.getDom("retypePass").value;if(!Ext.isEmpty(b)){this.updateMyText("errorChangeforNewPassword","");this.showMe("errorChangeforNewPassword",false)}if(!Ext.isEmpty(a)){this.updateMyText("errorChangePassword","");this.showMe("errorChangePassword",false)}this.enableMe("changePassword",this.passwordChangeAllowed())},passwordChangeAllowed:function(){return this.isNewPassOK()&this.isRetypePassOK()},isPrintableAndPermissible:function(c){var a=/[^ -~]/;var b=/[()<>,;:\"\[\]{}\'%\`\?#\+\^&\\\/\|\s]/;return !a.test(c)},testp:ifs.testPassword,retypePassFocusHandler:function(b,a){this.showMe("retypePassHints",true);this.showMe("errorChangePassword",false)},retypePassBlurHandler:function(b,a){var c=Ext.getDom("retypePass").value;this.showMe("retypePassHints",false);this.enableChangePassword();this.reTypePasswordErrorMessage(c,"errorChangePassword")},enableCall:function(){var a=Ext.getDom("userName").value;this.enableMe("sendPassword",a&&a.length)},changePasswordClickHandler:function(c,a){var b=this;var e=Ext.getDom("errorChangePassword");if(b.passwordChangeAllowed()){b.showMe(e,false);b.updateMyText(e,"")}else{b.showMe(e,false);b.updateMyText(e,ifs.env.i18nStrings.updateSettings.forgotPassword.invalidInput);return}var d=Ext.getDom("changePassword");b.enableMe(d,false);Ext.Ajax.request({url:"changePassword",params:{newPass:Ext.getDom("newPass").value},method:"POST",success:function(f,h){var g=Ext.decode(f.responseText,true);if(g&&g.model.result==="success"){window.location.href="../home"}else{if(g&&g.model&&g.model.result==="serviceStopped"){window.top.location.href=ifs.env.context+"/app/logout?reason=serviceStopped";return}if(g.model.errorInfo!=undefined&&g.model.errorInfo!=""&&g.model.errorInfo!=null){b.updateMyText(e,g.model.errorInfo)}else{b.updateMyText(e,ifs.env.i18nStrings.updateSettings.forgotPassword.errorChangingPassword)}b.showMe(e,true);b.showMe("passHints",true);Ext.get("newPass").focus();b.enableMe(d,true)}},failure:function(f,g){b.enableMe(d,true);b.showMe(e,true);b.updateMyText("errorSendPassword",ifs.env.i18nStrings.updateSettings.forgotPassword.errorChangingPassword);setTimeout(function(){ARIA.setAlertMessage(ifs.env.i18nStrings.updateSettings.forgotPassword.errorChangingPassword)},1000)}})},showBasicInfoClickHandler:function(b,a){this.showMe("forgotUsername",false);this.showMe("basicInfo",true)},forgotUsernameHandler:function(c,b){Ext.fly("recoverUsernameEmail").dom.value="";this.forgotUsernameValidationHandler();this.showError("recoverUsernameEmail","errorRecoverUsernameEmail",false);this.showMe("normalForgotPasswordMessageMessages",true);this.showMe("altForgotPasswordMessageMessages",false);ifs.showLightbox("forgotUsernameBk");var a=Ext.DomQuery.selectNode("section#basicInfo")},goBackToLoginHandler:function(c,b){if(goBackToLoginLink!=undefined&&goBackToLoginLink!=null&&goBackToLoginLink!=""){window.location.replace(goBackToLoginLink)}else{var a=ifs.env.context;window.location.replace(a+"/app/")}},forgotUsernameValidationHandler:function(d,b){var c=this;if(d&&d.keyCode===13&&Ext.fly("recoverUsername").getAttribute("disabled")!=="true"){c.recoverUsernameClickHandler()}else{function a(){var e=Ext.String.trim(Ext.fly("recoverUsernameEmail").getValue());var f=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test(e);c.enableMe("recoverUsername",f)}a();setTimeout(a,100)}},recoverUsername:function(a){var b=this;b.showError("recoverUsernameEmail","errorRecoverUsernameEmail",false);b.updateMyText("recoverUsernameEmailAddress",Ext.String.htmlEncode(a));b.updateMyText("recoverUsernameEmailAddressError",Ext.String.htmlEncode(a));Ext.getDom("loadingIcon").style.display="block";ARIA.setAlertMessage(ifs.env.i18nStrings.updateSettings.loadingMessage);Ext.Ajax.request({url:"authUpdate/recoverUsername",params:{email:a},method:"POST",success:function(d,f){Ext.getDom("loadingIcon").style.display="none";try{var c=Ext.JSON.decode(d.responseText,false);if(c.error){throw"Server side error"}}catch(g){b.showError("recoverUsernameEmail","errorRecoverUsernameEmail",true);ARIA.setProperty(Ext.get("recoverUsernameEmail").dom,"aria-invalid","true");ARIA.setProperty(Ext.get("recoverUsernameEmail").dom,"aria-describedby","errorRecoverUsernameEmail");ARIA.setRole(Ext.get("errorRecoverUsernameEmail").dom,"alert");ARIA.setProperty(Ext.get("errorRecoverUsernameEmail").dom,"aria-live","polite");return}if(c.model.errorCode==-2){b.showContactMeLightbox()}else{Ext.fly("recoverUsernameEmail").dom.value="";ifs.hideLightbox("forgotUsernameBk");b.showError("recoverUsernameEmail","errorRecoverUsernameEmail",false);b.showMe("normalForgotPasswordMessageMessages",false);b.showMe("altForgotPasswordMessageMessages",true);b.focusToUpdateSettingContent()}},failure:function(c,d){Ext.getDom("loadingIcon").style.display="none";b.showError("recoverUsernameEmail","errorRecoverUsernameEmail",true);b.focusToUpdateSettingContent()}})},focusToUpdateSettingContent:function(){var d=Ext.DomQuery.selectNode("a.bluelink");var b=Ext.DomQuery.selectNode("label.x-aria-hidden");var g="/</?[^>]+(>|$)/";var a=Ext.get("altForgotPasswordMessageMessages").dom.innerHTML;var h=this.removeHTMLTags(a);var f=Ext.get("forgotUsernameLink");var e=Ext.getDom("goBackToLogin");h+=ifs.env.i18nStrings.updateSettings.forgotPassword.phoneNumberLabelText+" "+ifs.env.i18nStrings.updateSettings.forgotPassword.phoneLabelText+" ";var c=Ext.DomQuery.selectNode("#userNameContainer label");h+=c.innerHTML+" "+ifs.env.i18nStrings.updateSettings.forgotPassword.userNamePlaceholder+" ";h+=ifs.env.i18nStrings.updateSettings.forgotPassword.sendPasswordButton+" ";h+=e.innerHTML;if(!Ext.isEmpty(f)&&Ext.isDefined(f)&&f.isVisible()){h+=f.dom.innerHTML}setTimeout(function(){ARIA.setAlertMessage(h+"  go to login Link")},2000);d.focus()},removeHTMLTags:function(b){b=b.replace(/&(lt|gt);/g,function(c,d){return(d=="lt")?"<":">"});var a=b.replace(/<\/?[^>]+(>|$)/g," ");return a},recoverUsernameClickHandler:function(){var a=Ext.String.trim(Ext.fly("recoverUsernameEmail").getValue());this.recoverUsername(a)},openContactMeLightboxHandler:function(b,c){this.closeForgotUsernamePopUpHandler(b,c);if(!Ext.isDefined(this.supportBox)){this.supportBox=Ext.create("Support",{isForgotUsername:true})}this.supportBox.supportMessageBox.show();var a=ARIA.readSupportPopup(this.supportBox);setTimeout(function(){ARIA.setAlertMessage(ifs.env.i18nStrings.updateSettings.modalBoxOpenMsg+" "+a)},1000);return false},closeContactMeLightboxHandler:function(a,b){ifs.hideLightbox("contactMeBkContainer");Ext.fly("forgotUsernameLink").focus();return false},showContactMeLightbox:function(){ifs.hideLightbox("forgotUsernameBk");Ext.fly("forgotUsernameLink").focus();ifs.showLightbox("contactMeBkContainer");return false},showError:function(d,c,b){var a=Ext.get(d);this.showMe(c,b);if(b){a.set({"aria-invalid":true,"aria-describedby":c});a.dom.value="";a.focus()}else{a.set({"aria-invalid":false});a.dom.removeAttribute("aria-describedby")}}});var updateSettings;var internationalNumber;var xToken;var _minPassLength;var _minPassLengthInWords;var goBackToLoginLink;Ext.onReady(function(){var a=Ext.get("sendPassword").dom;if(Ext.isDefined(Ext.get("forgotUsernameLink"))&&!Ext.isEmpty(Ext.get("forgotUsernameLink"))){var c=Ext.get("forgotUsernameLink").dom}ARIA.setProperty(a,"tabindex","0");ARIA.setProperty(c,"tabindex","0");Ext.getDom("newPassLabel").innerHTML=ifs.env.i18nStrings.updateSettings.forgotPassword.newPassLabel+" "+ifs.env.i18nStrings.updateSettings.forgotPassword.placeholderLabel;Ext.getDom("retypePassLabel").innerHTML=ifs.env.i18nStrings.updateSettings.forgotPassword.retypePassLabel+" "+ifs.env.i18nStrings.updateSettings.forgotPassword.retypePassLabel;Ext.getDom("changePasswordLabel").innerHTML=ifs.env.i18nStrings.updateSettings.forgotPassword.changePassLabel;Ext.Ajax.timeout=150000;preInit();updateSettings=Ext.create("UpdateSettings");var b="";if(_passwordResetFlow){b="newPass";ARIA.setFocusOnFirstInputElement(b,"success-headingDiv newPassLabel passHints retypePassLabel changePasswordLabel")}});