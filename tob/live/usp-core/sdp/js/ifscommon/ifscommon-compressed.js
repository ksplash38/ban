Ext.define("IFS.view.form.Button",{extend:"Ext.button.Button",alias:"widget.ifs-button",autoEl:"span",baseCls:"ifs-btn",config:{standard:true,primary:false,secondary:false},initComponent:function(){if(this.primary){this.addCls("ifs-btn-primary")}else{if(this.secondary){this.addCls("ifs-btn-secondary")}else{this.addCls("ifs-btn-standard")}}this.callParent(arguments)}});Ext.define("IFS.view.form.Checkbox",{extend:"Ext.container.Container",alias:"widget.ifs-checkbox",baseCls:"ifs-checkbox",autoEl:"span",config:{name:"",value:"",checked:true,label:null,leftAlignLabel:true},initComponent:function(){var a=this;a.addEvents("change");this.items=[{xtype:"component",cls:this.baseCls+"-check",tpl:Ext.create("Ext.XTemplate",'<input class="{baseCls}-input" type="checkbox" value="{value}" name="{name}" id="{name}" onchange="this.followChange"/>',{followChange:function(){a.setChecked(this.el.dom.checked)}}),data:{name:a.name,value:a.value,baseCls:a.baseCls},listeners:{el:{click:this.toggle,scope:this}}}];if(this.label){this.items.splice((this.leftAlignLabel?0:1),0,{xtype:"label",cls:this.baseCls+"-label"+(this.leftAlignLabel?"":"-right"),html:this.label,forId:this.name})}this.on("afterrender",function(){this.setChecked(this.checked)},this);this.callParent(arguments)},getCheck:function(){return this.getEl().down("."+this.baseCls+"-check")},isChecked:function(){return this.checked},setChecked:function(a){this.checked=a;var b=this.getEl().down("."+this.baseCls+"-input");b.dom.checked=a;if(a){this.addCls(this.baseCls+"-checked")}else{this.removeCls(this.baseCls+"-checked")}this.fireEvent("change",this,a)},startProcessing:function(){var a=this.getCheck();a.addCls("loadingImage")},stopProcessing:function(){var a=this.getCheck();a.removeCls("loadingImage")},toggle:function(){this.setChecked(!this.checked)}});Ext.define("IFS.view.form.Dropdown",{extend:"Ext.form.ComboBox",alias:"widget.dropdown",baseCls:"ifs-dropdown",allowBlank:true,editable:false,readonly:true,forceSelection:true,matchFieldWidth:true,autoSelect:true,grow:true,growToLongestValue:true,validateOnBlur:false,validateOnChange:false,listConfig:{},initComponent:function(){Ext.apply(this.listConfig,{baseCls:"ifs-dropdown-bl",cls:this.listConfig.cls,shadow:false});this.callParent(arguments)}});Ext.define("IFS.view.form.LocationDropdown",{extend:"IFS.view.form.Dropdown",alias:"widget.locationDropdown",baseCls:"ifs-dropdown",allowBlank:true,editable:false,readonly:true,forceSelection:true,matchFieldWidth:true,autoSelect:true,grow:true,growToLongestValue:true,validateOnBlur:false,validateOnChange:false,listConfig:{},initComponent:function(){Ext.apply(this.listConfig,{baseCls:"ifs-dropdown-bl",cls:this.listConfig.cls,shadow:false});this.callParent(arguments)}});Ext.define("IFS.view.form.Input",{extend:"Ext.Container",alias:"widget.ifs-input",autoEl:"span",baseCls:"ifs-input",requiredSubText:"Required",inputConfig:{},validationDelay:400,initComponent:function(){var a=this;a.validationTask=new Ext.util.DelayedTask(function(){a.down("textfield").validate()});this.items=[{xtype:"component",cls:"error-message inline-error",autoEl:"span",html:this.requiredSubText},{xtype:"textfield",baseCls:this.baseCls+"-text",fieldCls:this.baseCls+"-form-field",invalidCls:this.baseCls+"-invalid",shadow:false,preventMark:true,validateOnChange:false,listeners:{validitychange:this.changeValidity,change:this.delayValidation,scope:this}}];Ext.apply(this.items[1],this.inputConfig);this.callParent(arguments)},validate:function(){this.getTextField().validate()},changeValidity:function(a,b){var c=this.baseCls+"-invalid";if(!b){this.addCls(c)}else{this.removeCls(c)}},delayValidation:function(){this.validationTask.delay(this.validationDelay)},getTextField:function(){return this.getComponent(1)},updateErrorText:function(a){var b=this.getComponent(0);b.getEl().setHTML(a)}});Ext.define("IFS.view.form.Toggle",{extend:"Ext.container.Container",alias:"widget.toggle",cls:"ifs-toggle-container",autoEl:{tag:"span"},config:{onText:"On",offText:"Off",formFieldName:""},tpl:Ext.create("Ext.XTemplate",'<span class="ifs-toggle-option-container"><input type="radio" value="on" tabindex="0" name="{formFieldName}" checked="true"/><div class="ifs-toggle-option ifs-toggle-on">{onText}</div></span><span class="ifs-toggle-option-container"><input type="radio" value="off" tabindex="0" name="{formFieldName}"/><div class="ifs-toggle-option ifs-toggle-off ifs-toggle-unselected">{offText}</div></span>',{}),listeners:{afterrender:function(e){var a=this.el.query(".ifs-toggle-option");for(var b=0;b<a.length;b++){var d=Ext.get(a[b]);d.on("click",this.labelClick,this)}}},initComponent:function(){var a=this;this.data={onText:a.onText,offText:a.offText,formFieldName:a.formFieldName};a.addEvents("change");this.callParent(arguments)},labelClick:function(a){this.setOn(!this.isOn())},setOn:function(b){var e=this.el.down(".ifs-toggle-on");var a=this.el.down(".ifs-toggle-off");var d=e.prev("input");var c=a.prev("input");this.fireEvent("change",{toggle:this,on:b});if(b){e.removeCls("ifs-toggle-unselected");d.dom.checked=true;a.addCls("ifs-toggle-unselected");c.dom.checked=false}else{e.addCls("ifs-toggle-unselected");d.dom.checked=false;a.removeCls("ifs-toggle-unselected");c.dom.checked=true}},isOn:function(){var a=this.el.down("input:checked");return a.dom.value==="on"}});Ext.define("IFS.view.form.Amountfield",{extend:"Ext.form.NumberField",alias:"widget.ifs-amountfield",spinDownEnabled:false,spinUpEnabled:false,mouseWheelEnabled:false,keyNavEnabled:false,hideTrigger:true,baseChars:"0123456789.",decimalPrecision:2,minValue:0.01,maxValue:9999999.99,emptyText:"0.00",maxLength:12,enforceMaxLength:true,enableKeyEvents:true,minText:"",maxText:"",nanText:"",maxLengthText:"",baseCls:"ifs-amountfield",decimalSeparator:".",initComponent:function(){var a=this;a.on("keypress",this.handleKeypress);a.callParent(arguments)},parseValue:function(a){a=parseFloat(this.removeFormat(a));return isNaN(a)?null:a},setValue:function(a){var b=this;b.callParent(arguments);a=typeof a=="number"?a:this.removeFormat(a);a=isNaN(a)?"":b.formatNumber(this.fixPrecision(String(a)),"0,000,000.00");b.setRawValue(a)},processRawValue:function(a){return this.removeFormat(a)},getErrors:function(a){return this.callParent([this.removeFormat(a)])},removeFormat:function(a){return String(a).replace(this.decimalSeparator,".").replace(/,/g,"")},handleKeypress:function(l,b,i){var k=this;var f=l.inputEl.dom;var e=false;if(Ext.isIE){if(document.selection.createRange().text!=""){e=true}}else{if(f.selectionEnd>f.selectionStart){e=true}}var g=l.getRawValue();var d=g.split(",").length-1;g=g.replace(/,/g,"");var a=k.getCursorPosition(l);var h=g.indexOf(".");var j=g.split(".");var m=j[0];var c;c=m.length;if(c>=7&&(a<=h||h==-1)){if(Ext.isIE){key=b.getKey();if(key>47&&key<58&&!e){b.returnValue=false;b.stopPropagation();b.preventDefault?b.preventDefault():b.returnValue=false}}else{key=b.charCode;if(key>46&&key<58&&!e){b.stopEvent(b);return false}}}else{if(c+3==g.length&&a>h+d){if(Ext.isIE){key=b.getKey();if(key>46&&key<58&&!e){b.returnValue=false;b.stopPropagation();b.preventDefault?b.preventDefault():b.returnValue=false}}else{key=b.charCode;if(key>46&&key<58&&!e){b.stopEvent(b);return false}}}}if(Ext.isIE){key=b.getKey();if(g.indexOf(".")!==-1&&key==46&&!e){b.returnValue=false;b.stopPropagation();b.preventDefault?b.preventDefault():b.returnValue=false}}else{key=b.charCode;if(g.indexOf(".")!==-1&&key==46&&!e){b.stopEvent(b);return false}}},getCursorPosition:function(h){var d;var g;if(Ext.isIE){var c=document.selection.createRange().getBookmark();var b=h.inputEl.dom.createTextRange();b.moveToBookmark(c);var f=h.inputEl.dom.createTextRange();f.collapse(true);f.setEndPoint("EndToStart",b);var a=b.text.length;d=f.text.length;g=d+a}else{d=h.inputEl.dom.selectionStart;g=h.inputEl.dom.selectionEnd}return d},formatNumber:function(q,h){if(!h){return q}q=Ext.Number.from(q,NaN);if(isNaN(q)){return""}var s=",",f=".",r=/[^\d\.]/g,g=q<0,b,a,p,o,e,k,d,c,l;q=Math.abs(q);b=h.indexOf(",")!=-1;a=h.replace(r,"").split(".");if(a.length>2){Ext.Error.raise({sourceClass:"Ext.util.Format",sourceMethod:"number",value:q,formatString:h,msg:"Invalid number format, should have no more than 1 decimal"})}else{if(a.length>1){q=Ext.Number.toFixed(q,a[1].length)}else{q=Ext.Number.toFixed(q,0)}}p=q.toString();a=p.split(".");if(b){o=a[0];e=[];k=o.length;d=Math.floor(k/3);c=o.length%3||3;for(l=0;l<k;l+=c){if(l!==0){c=3}e[e.length]=o.substr(l,c);d-=1}p=e.join(s);if(a[1]){p+=f+a[1]}}else{if(a[1]){p=a[0]+f+a[1]}}if(g){g=p.replace(/[^1-9]/g,"")!==""}return(g?"-":"")+h.replace(/[\d,?\.?]+/,p)}});Ext.define("IFS.view.form.DatePicker",{extend:"Ext.picker.Date",alias:"widget.ifs-datepicker",msgTarget:"none",renderTpl:['<div id="{id}-innerEl">','<div id="{id}-buttonsEl" class="{baseCls}-close-button-parent">{%this.renderCloseBtn(values, out)%}</div>','<div role="presentation" class="{baseCls}-header">','<div class="{baseCls}-prev"><a id="{id}-prevEl" href="#" role="button" title="{prevText}"></a></div>','<div class="{baseCls}-month" id="{id}-middleBtnEl">{%this.renderMonthBtn(values, out)%}</div>','<div class="{baseCls}-next"><a id="{id}-nextEl" href="#" role="button" title="{nextText}"></a></div>',"</div>",'<table id="{id}-eventEl" class="{baseCls}-inner" cellspacing="0">',"<thead><tr>",'<tpl for="dayNames">','<tpl if="Ext.isMac">','<th scope="col"><span aria-label="{.}">{.:this.firstInitial}</span></th>',"</tpl>",'<tpl if="Ext.isWindows">','<th scope="col" title="{.}"><span class="accessible">{.}</span><span aria-hidden="true">{.:this.firstInitial}</span></th>',"</tpl>","</tpl>","</tr></thead>","<tbody><tr>",'<tpl for="days">',"{#:this.isEndOfWeek}",'<td id="{[Ext.id()]}">','<a role="presentation" href="#" hidefocus="on" class="{parent.baseCls}-date" tabIndex="1">','<em role="presentation"><span role="presentation"></span></em>',"</a>","</td>","</tpl>","</tr></tbody>","</table>",'<tpl if="showToday">','<div id="{id}-footerEl" role="presentation" class="{baseCls}-footer">{%this.renderTodayBtn(values, out)%}</div>',"</tpl>","</div>",{firstInitial:function(a){return Ext.picker.Date.prototype.getDayInitial(a)},isEndOfWeek:function(b){b--;var a=b%7===0&&b!==0;return a?'</tr><tr role="row">':""},renderTodayBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.todayBtn.getRenderTree(),b)},renderMonthBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.monthBtn.getRenderTree(),b)},renderCloseBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.closeBtn.getRenderTree(),b)}}],monthYearFormat:"F 'y",monthYearText:"",ariaTitle:"",initComponent:function(){var a=this;a.closeBtn=new Ext.button.Button({ownerCt:a,ownerLayout:a.getComponentLayout(),cls:a.baseCls+"-close-button",iconCls:a.baseCls+"-close-icon",text:"",handler:a.onCloseClick,scope:a});a.callParent(arguments)},beforeRender:function(){var a=this;a.callParent(arguments);a.monthBtn=new Ext.button.Button({ownerCt:a,ownerLayout:a.getComponentLayout(),text:"",tooltip:a.monthYearText})},finishRenderChildren:function(){var a=this;a.callParent();a.closeBtn.finishRender()},showPrevMonth:function(a){if(!Ext.isDefined(this.minDate)){this.callParent(arguments)}else{if(Ext.Date.getFirstDateOfMonth(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))>=Ext.Date.getFirstDateOfMonth(this.minDate)){return this.update(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))}}},showNextMonth:function(a){if(!Ext.isDefined(this.maxDate)){this.callParent(arguments)}else{if(Ext.Date.getLastDateOfMonth(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))<=Ext.Date.getLastDateOfMonth(this.maxDate)){return this.update(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))}}},handleDateClick:function(c,a){var b=this;if(Ext.fly(a.parentNode).hasCls(b.prevCls)||Ext.fly(a.parentNode).hasCls(b.nextCls)){c.stopEvent()}else{b.callParent(arguments)}},onCloseClick:function(){this.hide()},update:function(e,q){var j=this,d=(Ext.Date.clearTime(j.pickerField.getValue(),true)).getTime(),p=j.cells,h=j.selectedCls,b=j.prevCls,o=j.nextCls,a=j.todayCls,l=p.elements,i,k=l.length,n;j.callParent(arguments);var g=+Ext.Date.getFirstDateOfMonth(j.activeDate);var m=+Ext.Date.getLastDateOfMonth(j.activeDate);for(i=0;i<k;i++){n=Ext.fly(l[i]);var f=n.dom.firstChild.dateValue;if(f==d&&!n.hasCls(h)&&!n.hasCls(b)&&!n.hasCls(o)){n.addCls(h)}if(n.hasCls(h)&&f!=d){n.removeCls(h)}if(f<g){if(n.hasCls(a)){n.removeCls(a)}if(!n.hasCls(b)){n.addCls(b)}n.set({title:""})}if(f>m){if(n.hasCls(a)){n.removeCls(a)}if(!n.hasCls(o)){n.addCls(o)}n.set({title:""})}if(f>=g&&f<=m){n.dom.firstChild.removeAttribute("aria-hidden")}if((f<g)||(f>m)){n.select(".x-datepicker-date").set({"aria-hidden":"true"})}}return j}});Ext.define("IFS.view.form.DateField",{extend:"Ext.form.field.Date",alias:"widget.ifs-datefield",msgTarget:"none",preventMark:true,width:272,componentCls:"ifs-datefield",initComponent:function(){var a=this;a.callParent(arguments)},createPicker:function(){var a=this,b=Ext.String.format;return new IFS.view.form.DatePicker({pickerField:a,ownerCt:a.ownerCt,renderTo:document.body,floating:true,hidden:true,focusOnShow:true,minDate:a.minValue,maxDate:a.maxValue,disabledDatesRE:a.disabledDatesRE,disabledDatesText:a.disabledDatesText,disabledDays:a.disabledDays,disabledDaysText:a.disabledDaysText,format:a.format,showToday:a.showToday,startDay:a.startDay,minText:b(a.minText,a.formatDate(a.minValue)),maxText:b(a.maxText,a.formatDate(a.maxValue)),msgTarget:"none",width:285,height:407,listeners:{scope:a,select:a.onSelect,highlightitem:a.highlightitem},keyNavConfig:{esc:function(){a.collapse()}}})},highlightitem:function(b,a){var c=this;c.fireEvent("highlightitem",c,b,a)}});Ext.define("IFS.view.widgets.Loader",{extend:"Ext.Component",alias:"widget.loader",cls:"ifs-loader",data:{loadingText:"Loading..."},initComponent:function(){this.tpl=Ext.create("Ext.XTemplate",'<span class="ifs-loader-display"><span class="loadingImage"></span> {loadingText}</span>',{});this.callParent(arguments)}});Ext.define("IFS.view.widgets.ShadowBox",{extend:"Ext.container.Container",alias:"widgets.shadowbox",baseCls:"ifs-shadowbox",cls:"ifs-shadowbox-overlay",renderTo:Ext.getBody(),floating:false,shadow:false,config:{autoShow:false,title:null,closable:false,confirmation:false,headerItems:[],footerItems:[],modalDialog:true,tools:[],closeButtonTooltip:"Close"},initComponent:function(){var a=this;a.addEvents("beforeshow","show","beforehide","hide");if(this.closable){this.tools.push({xtype:"tool",type:"close",tooltipType:"title",autoEl:{tag:"a",href:"javascript:void(0);"},tooltip:this.closeButtonTooltip,hidden:false,handler:this.hide,scope:a})}Ext.apply(this,{items:[{xtype:"container",cls:this.baseCls+"-display",autoEl:"span",items:{xtype:"container",cls:this.baseCls+"-content",items:[{xtype:"container",cls:this.baseCls+"-tools",items:this.tools,listeners:{afterlayout:function(){this.el.setRight(20+15*this.tools.length)},scope:this}},{xtype:"container",cls:this.baseCls+"-header",items:this.headerItems,html:this.title},{xtype:"container",cls:this.baseCls+"-body",items:this.items,html:this.html},{xtype:"container",cls:this.baseCls+"-footer",items:this.footerItems}]}}],html:null});if(this.confirmation){this.addCls(this.baseCls+"-confirm")}if(!this.autoShow){this.style={display:"none"}}this.listeners={beforeadd:this.addResizeListener,beforedestroy:this.removeResizeListener,beforeshow:this.onWindowResize,scope:this};this.callParent(arguments)},addResizeListener:function(){Ext.EventManager.onWindowResize(this.onWindowResize,this);Ext.fly(window).on("scroll",this.onWindowResize,this)},removeResizeListener:function(){Ext.EventManager.removeResizeListener(this.onWindowResize,this);Ext.fly(window).removeListener("scroll",this.onWindowResize,this)},getShadowBox:function(){if(!this.shadowbox){this.shadowbox=this.down("container[cls="+this.baseCls+"-display]")}return this.shadowbox},show:function(){this.fireEvent("beforeshow",this);this.el.setStyle({display:"block"});this.updatePosition();this.getShadowBox().doLayout();this.fireEvent("show",this)},hide:function(){this.fireEvent("beforehide",this);this.getEl().setStyle("display","none");this.fireEvent("hide",this)},close:function(){this.hide()},getLeft:function(){return Math.max(0,this.el.getComputedWidth()/2-this.getShadowBox().getEl().getComputedWidth()/2)},getTop:function(){var a=0;if(window.self!==window.top){var d=this.getParentOffset();var b=Ext.getBody().getViewSize().height;if(!this.headerOffset){if(document.querySelectorAll!==undefined){var c=top.document.querySelectorAll(".usp-header1");if(c&&c.length>0){this.headerOffset=c[0].scrollHeight}}else{if(Ext.isIE7){this.headerOffset=130}}if(!this.headerOffset){this.headerOffset=0}}a=Math.max(10,Math.floor(d-this.headerOffset+this.el.getComputedHeight()/2-this.getShadowBox().getEl().getComputedHeight()/2));if(a+this.el.getComputedHeight()>b){a=10}if(a+this.getShadowBox().getEl().getComputedHeight()>this.el.getComputedHeight()){a=Math.max(10,this.el.getComputedHeight()-this.getShadowBox().getEl().getComputedHeight())}}else{a=Math.max(10,this.el.getComputedHeight()/2-this.getShadowBox().getEl().getComputedHeight()/2)}return a},getParentOffset:function(){var c=top.document.documentElement,a=top.document.body,b=(c&&c.scrollTop||a&&a.scrollTop||0);return b},onWindowResize:function(){this.updatePosition()},setTitle:function(a){this.getHeader().update(a);this.updatePosition()},updatePosition:function(b,a){this.getEl().setStyle({top:Ext.getBody().getScroll().top+"px"});this.updateBodyMaxHeight();if(!b||!a){this.getShadowBox().getEl().setStyle({left:this.getLeft()+"px",top:this.getTop()+"px"})}else{this.getShadowBox().getEl().setStyle({left:b,top:a})}},updateBodyMaxHeight:function(b){var d=this.getContent().getHeight(),a=this.getBody(),c=this.el.getViewSize().height;if(!b){a.getEl().setStyle({maxHeight:Math.max(100,Math.floor(c-(d-a.getHeight())-20))+"px"})}else{a.getEl().setStyle({maxHeight:b+"px"})}},getContent:function(){if(!this.contentComp){this.contentComp=this.down("container[cls="+this.baseCls+"-content]")}return this.contentComp},getHeader:function(){if(!this.headerComp){this.headerComp=this.down("container[cls="+this.baseCls+"-header]")}return this.headerComp},getBody:function(){if(!this.bodyComp){this.bodyComp=this.down("container[cls="+this.baseCls+"-body]")}return this.bodyComp},getFooter:function(){if(!this.footerComp){this.footerComp=this.down("container[cls="+this.baseCls+"-footer]")}return this.footerComp}});Ext.define("IFS.view.widgets.ToolTip",{extend:"Ext.container.Container",alias:"widget.ifs-tooltip",baseCls:"ifs-tooltip",renderTo:Ext.getBody(),floating:true,shadow:false,interactive:false,title:null,headerItems:[],footerItems:[],tools:[],target:null,anchorToTarget:true,anchorOffset:0,contentOffset:0,anchor:"top",closable:false,autoHide:true,showDelay:500,hideDelay:200,hideOnDocClick:false,statics:{getOffsetPosition:function(b){var a=[0,0];b=!b?this:b;do{if(!isNaN(b.offsetLeft)){a[0]+=b.offsetLeft}if(!isNaN(b.offsetTop)){a[1]+=b.offsetTop}}while(b=b.offsetParent);return a},getTargetCenter:function(b){if(b.target.dom!==undefined){var a=b.self.getOffsetPosition(b.target.dom);a[0]=a[0]+b.target.getComputedWidth()/2;a[1]=a[1]+b.target.getComputedHeight()/2;return a}}},initComponent:function(){var a=this;a.addEvents("hide","beforeshow");if(this.closable){this.tools.push({xtype:"tool",type:"close",tooltipType:"title",tooltip:"Close",hidden:false,handler:this.hide,scope:a})}Ext.apply(this,{items:[{xtype:"component",baseCls:this.baseCls+"-arrow"},{xtype:"container",cls:this.baseCls+"-content",listeners:{el:{click:function(b){b.stopEvent()}}},items:[{xtype:"container",cls:this.baseCls+"-tools",items:this.tools,listeners:{afterlayout:function(){this.el.setRight(20+15*a.tools.length)}}},{xtype:"container",cls:this.baseCls+"-header",items:this.headerItems,html:this.title},{xtype:"container",cls:this.baseCls+"-body",items:this.items,html:this.html},{xtype:"container",cls:this.baseCls+"-footer",items:this.footerItems}]}],html:null});this.listeners={beforeshow:this.determineAndSetPosition,beforeadd:this.addResizeListener,beforedestroy:this.removeResizeListener,scope:this};if(this.interactive){this.hideOnDocClick=true;this.autoHide=false;this.autoShow=false;this.showDelay=100000;this.addCls(this.baseCls+"-interactive")}this.callParent(arguments);a.visible=false;a.setTarget(a.target);if(this.interactive){if(this.target){this.target.on("click",function(){this.show()},this)}}},addResizeListener:function(){Ext.EventManager.onWindowResize(this.onWindowResize,this);Ext.fly(window).on("scroll",this.onWindowResize,this);if(this.hideOnDocClick){Ext.getDoc().on("click",this.onDocumentClick,this)}},removeResizeListener:function(){Ext.EventManager.removeResizeListener(this.onWindowResize,this);Ext.fly(window).removeListener("scroll",this.onWindowResize,this);if(this.hideOnDocClick){Ext.getDoc().removeListener("click",this.onDocumentClick,this)}this.setTarget(null)},onWindowResize:function(){this.determineAndSetPosition(this)},onDocumentClick:function(a){if(this.visible&&!a.within(this.target.dom,false,true)){this.hide()}},close:function(){this.hide()},determineAnchor:function(e){e=!e?this:e;var b=Ext.getBody().getScroll(),d=Ext.getBody().getViewSize(),c=e.getEl().getSize(),f=null,a=e.self.getTargetCenter(e),g=e.target.getSize(),h=e.getArrow();h.removeCls(this.baseCls+"-arrow-top");h.removeCls(this.baseCls+"-arrow-bottom");h.removeCls(this.baseCls+"-arrow-left");h.removeCls(this.baseCls+"-arrow-right");while(!f){f=e.anchor;switch(e.anchor){case"top":if(a[1]+(g.height/2)+c.height>b.top+d.height){f="bottom"}break;case"bottom":if(a[1]-(g.height/2)-c.height<b.top){f="top"}break;case"right":if(a[0]-(g.width/2)-c.width<b.left){f="left"}break;case"left":if(a[0]+(g.width/2)+c.width>b.left+d.width){f="right"}break;default:e.anchor="top";f=null;break}}h.addCls(this.baseCls+"-arrow-"+f);return f},determineAndSetPosition:function(a,g){if(a.target.dom!==undefined){g=!g?{}:g;a=!a?this:a;if(!g.left||!g.top){if(a.target){var l=a.getArrow().getEl(),i=a.getContent().getEl(),f=a.determineAnchor(a),k=a.target.getComputedWidth(),h=a.target.getComputedHeight(),j=a.self.getTargetCenter(a),c=a.getEl().getComputedWidth(),b=a.getEl().getComputedHeight(),e=l.getComputedWidth(),d=l.getComputedHeight(),m=a.anchorOffset;switch(f){case"top":g.top=Math.floor(j[1]+(h/2));g.left=Math.floor(j[0]-(c/2));l.setStyle({left:Math.floor(c/2-e/2+m)+"px",top:"0px"});i.setStyle({left:this.contentOffset+"px",top:d+"px"});break;case"bottom":g.top=Math.floor(j[1]-(h/2)-b-d);g.left=Math.floor(j[0]-(c/2));l.setStyle({left:Math.floor(c/2-e/2+m)+"px",top:i.getComputedHeight()+"px"});i.setStyle({left:this.contentOffset+"px",top:"0px"});break;case"right":g.top=Math.floor(j[1]-(b/2));g.left=Math.floor(j[0]-(k/2)-c-e);l.setStyle({left:i.getComputedWidth()+"px",top:Math.floor(b/2-d/2+m)+"px"});i.setStyle({left:"0px",top:this.contentOffset+"px"});break;case"left":g.top=Math.floor(j[1]-(b/2));g.left=Math.floor(j[0]+(k/2));l.setStyle({left:"0px",top:Math.floor(b/2-d/2+m)+"px"});i.setStyle({left:e+"px",top:this.contentOffset+"px"});break;default:break}}}this.getEl().setStyle({left:g.left+"px",top:g.top+"px"})}},getArrow:function(){return this.getComponent(0)},getContent:function(){return this.getComponent(1)},hide:function(){this.fireEvent("beforehide",this);this.visible=false;this.lastActive=new Date();this.getEl().setStyle({visibility:"hidden",left:"-2000px",top:"-2000px"});this.fireEvent("hide",this)},show:function(b,a){this.fireEvent("beforeshow",this,{left:b,top:a});this.visible=true;this.lastActive=new Date();this.getEl().setStyle({visibility:"visible"});Ext.WindowManager.bringToFront(this)},setTarget:function(c){var b=this,a=Ext.get(c);if(b.target){b.mun(b.target,"mouseover",b.onTargetOver,b);b.mun(b.target,"mouseout",b.onTargetOut,b)}b.target=a;if(a){b.mon(a,{freezeEvent:true,mouseover:b.onTargetOver,mouseout:b.onTargetOut,scope:b})}},onTargetOver:function(c){var b=this,a;if(b.disabled||c.within(b.target.dom,true)){return}a=c.getTarget(b.delegate);if(a){b.clearTimer("hide");b.targetXY=c.getXY();b.delayShow()}},onTargetOut:function(b){var a=this;if(a.disabled||b.within(a.target.dom,true)){return}a.clearTimer("show");if(a.autoHide!==false){a.delayHide()}},clearTimer:function(a){a=a+"Timer";clearTimeout(this[a]);delete this[a]},delayShow:function(){var a=this;if(!a.visible&&!a.showTimer){if(Ext.Date.getElapsed(a.lastActive)<a.quickShowInterval){a.show()}else{a.showTimer=Ext.defer(a.show,a.showDelay,a)}}else{if(!a.visible&&a.autoHide!==false){a.show()}}},delayHide:function(){var a=this;if(a.visible&&!a.hideTimer){a.hideTimer=Ext.defer(a.hide,a.hideDelay,a)}}});Ext.define("IFS.view.widgets.MenuOverlay",{extend:"Ext.container.Container",alias:"widgets.menuoverlay",baseCls:"ifs-base-menu",cls:"ifs-menu",renderTo:Ext.getBody(),config:{autoShow:false,title:null,closable:true,bodyItems:[],footerItems:[],closeIcon:null,closeButtonTooltip:"Close"},initComponent:function(){var a=this;a.addEvents("show");if(this.closable){this.closeIcon={xtype:"tool",type:"close",autoEl:{tag:"a",href:"javascript:void(0);"},tooltip:this.closeButtonTooltip,hidden:false,handler:this.destroy,scope:a}}Ext.apply(this,{items:[{xtype:"container",cls:this.baseCls+"-display",autoEl:"span",items:{xtype:"container",cls:this.baseCls+"-content",items:[{xtype:"container",cls:this.baseCls+"-tools",items:this.closeIcon},{xtype:"container",cls:this.baseCls+"-arrow",html:'<div class="arrow_image"></div>'},{xtype:"container",cls:this.baseCls+"-title",html:this.title},{xtype:"container",cls:this.baseCls+"-body",items:this.bodyItems,html:this.html},{xtype:"container",cls:this.baseCls+"-footer",items:this.footerItems}]}}],html:null});if(!this.autoShow){this.style={display:"none"}}this.listeners={beforeshow:this.onWindowResize,beforeadd:this.addResizeListener,beforedestroy:this.removeResizeListener,scope:this};this.callParent(arguments)},addResizeListener:function(){Ext.EventManager.onWindowResize(this.onWindowResize,this)},removeResizeListener:function(){Ext.EventManager.removeResizeListener(this.onWindowResize,this)},onWindowResize:function(){this.updatePosition()},getTop:function(){if(this.clickLocationId){return Ext.get(this.clickLocationId).getY()}return null},getLeft:function(){if(this.clickLocationId){return Ext.get(this.clickLocationId).getX()}return null},getMenuOverlay:function(){if(!this.menuoverlay){this.menuoverlay=this.down("container[cls="+this.baseCls+"-display]")}return this.menuoverlay},show:function(c,a){var b=this;this.fireEvent("beforeshow",this);this.el.setStyle({display:"block"});this.clickLocationId=c;this.offsetObj=a;this.updatePosition();this.getMenuOverlay().doLayout();this.fireEvent("show",this)},updatePosition:function(){this.getEl().setStyle({top:Ext.getBody().getScroll().top+"px"});if(!this.clickLocationId&&!this.offsetObj){this.getMenuOverlay().getEl().setStyle({left:"50px",top:"50px"})}else{if(this.clickLocationId&&!this.offsetObj){this.getMenuOverlay().getEl().setStyle({left:this.getLeft()+"px",top:this.getTop()+"px"})}else{if(!this.clickLocationId&&this.offsetObj){this.getMenuOverlay().getEl().setStyle({left:this.offsetObj.XOffset+"px",top:this.offsetObj.YOffset+"px"})}else{if(this.clickLocationId&&this.offsetObj){this.getMenuOverlay().getEl().setStyle({left:this.getLeft()+this.offsetObj.XOffset+"px",top:this.getTop()+this.offsetObj.YOffset+"px"})}}}}}});Ext.define("IFS.view.container.TypeFiveStandard",{extend:"Ext.container.Container",alias:"widget.typeFiveStandard",cls:"ifs-widget-panel ifs-container-five",config:{widgetTitle:""},initComponent:function(){Ext.apply(this,{items:[{xtype:"container",cls:"ifs-widget-content-header",items:[{xtype:"component",autoEl:"h3",html:this.widgetTitle}]},{xtype:"container",cls:"ifs-widget-content-body",items:this.items}]});this.callParent(arguments)}});Ext.define("IFS.view.container.TypeFourStandard",{extend:"Ext.container.Container",alias:"widget.typeFourStandard",cls:"ifs-widget-panel ifs-container-four",config:{widgetTitle:"",additionalText:"",footerText:""},initComponent:function(){Ext.apply(this,{items:[{xtype:"container",cls:"ifs-widget-content",items:[{xtype:"container",cls:"ifs-widget-content-header",items:[{xtype:"component",cls:"ifs-widget-title",autoEl:"h3",html:this.widgetTitle}]},{xtype:"component",cls:"ifs-widget-content-info",html:this.additionalText},{xtype:"container",cls:"ifs-widget-content-body",items:[{xtype:"container",items:this.items},{xtype:"component",cls:"ifs-widget-content-footer",html:this.footerText}]}]}]});this.callParent(arguments)}});Ext.define("IFS.view.container.TypeOnePrimary",{extend:"Ext.container.Container",alias:"widget.typeOnePrimary",cls:"ifs-widget-panel ifs-container-one ifs-primary-container",config:{widgetTitle:"",contentHeader:"",helpLinkText:""},initComponent:function(){var a=this;Ext.apply(this,{items:[{xtype:"container",cls:"ifs-widget-panel-header",items:[{xtype:"component",autoEl:"h3",cls:"ifs-widget-title",html:this.widgetTitle},{xtype:"component",autoEl:"a",cls:"ifs-widget-help-link",html:this.helpLinkText,listeners:{click:{element:"el",fn:function(b,c){a.fireEvent("helpLinkClicked",c,this,b)}}}}]},{xtype:"container",cls:"ifs-widget-panel-body",items:[{xtype:"component",cls:"ifs-widget-content-header",html:this.contentHeader},{xtype:"container",cls:"ifs-widget-content-body",items:this.items}]}]});this.callParent(arguments)}});Ext.define("IFS.view.container.TypeOneStandard",{extend:"Ext.container.Container",alias:"widget.typeOneStandard",cls:"ifs-widget-panel ifs-container-one",config:{widgetTitle:"",contentHeader:"",helpLinkText:""},initComponent:function(){var a=this;Ext.apply(this,{items:[{xtype:"container",cls:"ifs-widget-panel-header",items:[{xtype:"component",autoEl:"h3",cls:"ifs-widget-title",html:this.widgetTitle},{xtype:"component",autoEl:"a",cls:"ifs-widget-help-link",html:this.helpLinkText,listeners:{click:{element:"el",fn:function(b,c){a.fireEvent("helpLinkClicked",c,this,b)}}}}]},{xtype:"container",cls:"ifs-widget-panel-body",items:[{xtype:"component",cls:"ifs-widget-content-header",html:this.contentHeader},{xtype:"container",cls:"ifs-widget-content-body",items:this.items}]}]});this.callParent(arguments)}});Ext.define("IFS.view.container.TypeSevenStandard",{extend:"Ext.container.Container",alias:"widget.typeSevenStandard",cls:"ifs-widget-panel ifs-container-seven",config:{widgetTitle:""},initComponent:function(){Ext.apply(this,{items:[{xtype:"container",cls:"ifs-widget-panel-header",items:[{xtype:"component",cls:"ifs-widget-title",autoEl:"h3",html:this.widgetTitle}]},{xtype:"container",cls:"ifs-widget-panel-body",items:this.items}]});this.callParent(arguments)}});Ext.define("IFS.view.container.TypeSixStandard",{extend:"Ext.container.Container",alias:"widget.typeSixStandard",cls:"ifs-widget-panel ifs-container-six",config:{widgetTitle:""},initComponent:function(){Ext.apply(this,{items:[{xtype:"container",cls:"ifs-widget-panel-header",items:[{xtype:"component",cls:"ifs-widget-title",autoEl:"h3",html:this.widgetTitle}]},{xtype:"container",cls:"ifs-widget-panel-body",items:this.items}]});this.callParent(arguments)}});Ext.define("IFS.view.container.TypeThreeStandard",{extend:"Ext.container.Container",alias:"widget.typeThreeStandard",cls:"ifs-widget-panel ifs-container-three",config:{widgetTitle:"&nbsp;",rightHeader:null},initComponent:function(){Ext.apply(this,{items:[{xtype:"container",cls:"ifs-widget-content",items:[{xtype:"container",autoEl:"span",cls:"ifs-widget-header-right",items:this.rightHeader},{xtype:"container",cls:"ifs-widget-content-header",items:[{xtype:"component",autoEl:"h3",html:this.widgetTitle}]},{xtype:"container",cls:"ifs-widget-content-body",items:this.items}]}]});this.callParent(arguments)}});Ext.define("IFS.view.container.TypeTwoStandard",{extend:"Ext.container.Container",alias:"widget.typeTwoStandard",cls:"ifs-widget-panel ifs-container-two",config:{widgetTitle:"",helpLinkText:""},initComponent:function(){var a=this;Ext.apply(this,{items:[{xtype:"container",cls:"ifs-widget-panel-header",items:[{xtype:"component",autoEl:"h3",cls:"ifs-widget-title",html:this.widgetTitle},{xtype:"component",autoEl:"a",cls:"ifs-widget-help-link",html:this.helpLinkText,listeners:{click:{element:"el",fn:function(b,c){a.fireEvent("helpLinkClicked",c,this,b)}}}}]},{xtype:"container",cls:"ifs-widget-panel-body",items:[{xtype:"container",cls:"ifs-widget-content-body",items:this.items}]}]});this.callParent(arguments)}});